<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AR Book Experience</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
    
    <!-- Third-party libraries -->
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/turn.js/3/turn.min.js"></script>
</head>
<body>
    <!-- Permission UI -->
    <div id="permission-ui" class="overlay">
        <div class="permission-content">
            <h2>Camera Access Required</h2>
            <p>This AR experience needs access to your camera to work.</p>
            <button id="permission-button" class="main-button">Grant Camera Access</button>
        </div>
    </div>
    
    <!-- Loading indicator -->
    <div id="loading-indicator" class="overlay" style="display: none;">
        <div class="spinner"></div>
        <p>Loading AR Experience...</p>
    </div>
    
    <!-- Scanning indicator - shown when looking for pattern -->
    <div id="scanning-ui" class="overlay" style="display: none;">
        <div class="scanning-content">
            <div class="scanner-border"></div>
            <p>Point your camera at the AR marker</p>
        </div>
    </div>
    
    <!-- AR Scene -->
    <a-scene id="ar-scene" embedded arjs="sourceType: webcam; detectionMode: mono_and_matrix; matrixCodeType: 3x3; debugUIEnabled: false; patternRatio: 0.75" vr-mode-ui="enabled: false" style="display: none;">
        <!-- Camera with user-added gesture-detector -->
        <a-entity camera></a-entity>
        
        <!-- Custom pattern marker -->
        <a-marker id="book-marker" type="pattern" url="assets/markers/pattern-qr.patt" emitevents="true" smooth="true">
            <!-- AR Book model will be anchored here -->
            <a-entity id="book-container" position="0 0.5 0" rotation="-90 0 0">
                <!-- Individual pages will be added dynamically -->
            </a-entity>
        </a-marker>
    </a-scene>
    
    <!-- AR Controls - always visible when AR is active -->
    <div id="ar-controls" class="controls" style="display: none;">
        <button id="prev-btn" class="nav-btn">Previous</button>
        <button id="next-btn" class="nav-btn">Next</button>
    </div>
    
    <!-- JavaScript -->
    <script src="js/app.js"></script>
</body>
</html>
